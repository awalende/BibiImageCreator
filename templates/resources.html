{% extends "main.html" %}
{% block body %}
<h3>Local Machine Health</h3>


    <div class="panel panel-default">
        <div class="panel-body" id="panel_health">
            <h5>CPU Load:</h5>
            <p id="cpu_name">x86</p>

            <div class="progress" id="custom_progress">
                <div class="progress-bar" id="cpu_progress" role="progressbar"  aria-valuenow="{{ data[1] }}" aria-valuemin="0" aria-valuemax="100" style="width:{{ data[1] }}%">
                    {{ data[1] }}%
                </div>
            </div>

            <br>

            <h5>RAM Usage</h5>
            <div class="progress" id="custom_progress">
                <div class="progress-bar" id="ram_usage" role="progressbar"  aria-valuenow="{{ data[2] }}" aria-valuemin="0" aria-valuemax="100" style="width:{{ data[2] }}%">
                    {{ data[2] }}%
                </div>
            </div>
        </div>

    </div>

    <script type="text/javascript">


        $(document).ready(function () {
           refreshHealthData()
        });

        function refreshHealthData() {

            $.getJSON('/_getHealth', function (data) {
               $('#cpu_name').text(data.cpu_name);
               $('#cpu_progress').attr("aria-valuenow", data.cpu_load);
               $('#cpu_progress').attr("style", "width:" + data.cpu_load + "%");
               $('#cpu_progress').text(data.cpu_load + "%");

               $('#ram_usage').attr("aria-valuenow", data.ram_usage);
               $('#ram_usage').attr("style", "width:" + data.ram_usage + "%");
               $('#ram_usage').text(data.ram_usage + "%");

            });

            //alert("test1");
            setTimeout(refreshHealthData, 2500);

        }

    </script>

{% endblock %}