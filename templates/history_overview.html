{% extends "main.html" %}
{% block body %}


<h3>History Overview</h3>

    <div class="panel panel-default">
        <div class="panel-body">
            <table class="table" id="history_table">
                <thead>
                    <tr>
                        <th>id</th>
                        <th>name</th>
                        <th>owner</th>
                        <th>Basis Image</th>
                        <th>ImageID of Build in Cloud</th>
                        <th>Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
    </div>



    <script type="text/javascript">

        $(document).ready(function () {
            fillHistoryTable()

        });

        function fillHistoryTable() {
            $.getJSON('/_getHistory', function (result) {

                console.log(result);

                var target = '#history_table > tbody:last-child';
                var infoButton = '<button id = "info_button" type = "button" class="btn btn-xs btn-warning"> <span class="glyphicon glyphicon-info-sign"></span> </button>';
                var deleteButton = '<button id="delete_button" type="button" class="btn btn-xs btn-danger"> <span class="glyphicon glyphicon-trash"></span> </button>';



                for(var i = 0; i < result.length; i++){
                    var tableData = '<tr>';
                    tableData = tableData.concat('<td>' + result[i].id + '</td>');
                    tableData = tableData.concat('<td>' + result[i].name + '</td>');
                    tableData = tableData.concat('<td>' + result[i].owner + '</td>');
                    tableData = tableData.concat('<td>' + result[i].base_image_id + '</td>');
                    tableData = tableData.concat('<td>' + result[i].new_image_id + '</td>');
                    tableData = tableData.concat('<td>' + result[i].date + '</td>');


                    //actions
                    tableData = tableData.concat('<td>' + infoButton + ' ' + deleteButton + '</td>');
                    tableData = tableData.concat('</tr>');

                }
                $(target).append(tableData);



            })


        }








    </script>
























{% endblock %}